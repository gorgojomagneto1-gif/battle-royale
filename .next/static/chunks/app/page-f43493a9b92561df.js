(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3224:function(e,a,t){Promise.resolve().then(t.bind(t,8667))},8667:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return j}});var s=t(7437),n=t(2265),i=t(9066);let o="https://kzmcfvyfykzqnnirisks.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6bWNmdnlmeWt6cW5uaXJpc2tzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUxNTAzNTYsImV4cCI6MjA4MDcyNjM1Nn0.0hfI242ZtNt4_lcem2eD5YaAknqxCO_hc6m5G95SptI",r=o&&l?(0,i.eI)(o,l):null,c="2025-12-zero-votes",d=[{name:"Novato",xp:0},{name:"Causita",xp:400},{name:"Causita Pro",xp:1200},{name:"Leyenda",xp:2400}],m=["\xa1Buen voto!","\xa1Elecci\xf3n s\xf3lida!","\xa1Gran docente!","\xa1Me gusta!","\xa1Bac\xe1n!"],h=["Causa, ya est\xe1s en modo Dios.","Est\xe1s en modo ceviche con su leche de tigre: potente.","Est\xe1s imparable, v\xf3tame tu gaaa"],p=["mano","al toque","tranqui","ya pe","bac\xe1n"],u=[{id:1,name:"Escudero Aguilar, Gudelia Sof\xeda",department:"Docente UNMSM",image:"/gudelia.jpg",rating:4.8,votes:0,elo:1500},{id:2,name:"Julio Chicana",department:"Docente UNMSM",image:"/chicana.jpg",rating:4.8,votes:0,elo:1500},{id:3,name:"Acu\xf1a, Walter",department:"Docente UNMSM",image:"/acu\xf1a.jpg",rating:4.8,votes:0,elo:1500},{id:4,name:"Arbaiza Gonzales, Luz Rossana",department:"Docente UNMSM",image:"/s200_rossana.arbaiza_11zon.jpg",rating:4.8,votes:0,elo:1500},{id:5,name:"Montalvo Balarezo, Roc\xedo Amelia",department:"Docente UNMSM",image:"/rocio.png",rating:4.8,votes:0,elo:1500},{id:6,name:"Hinojosa Lazo, Hilmar Antonio",department:"Docente UNMSM",image:"/hilmarhinojosa.yolasite.com_11zon.jpg",rating:4.8,votes:0,elo:1500},{id:7,name:"Malca Chuquiruna, Raquel Beatriz",department:"Docente UNMSM",image:"/malca-chuquiruna-raquel-beatriz-19921211_11zon.jpeg",rating:4.8,votes:0,elo:1500},{id:8,name:"Calsina Miramira, Willy Hugo",department:"Docente UNMSM",image:"/calsina.jpg",rating:4.8,votes:0,elo:1500},{id:9,name:"Vergiu Canto, Jorge Luis",department:"Docente UNMSM",image:"/vergiu.jpg",rating:4.8,votes:0,elo:1500},{id:10,name:"Villena Presentaci\xf3n, Ricardo",department:"Docente UNMSM",image:"/villena_11zon.jpg",rating:4.8,votes:0,elo:1500},{id:11,name:"Wong Cabanillas, Francisco Javier",department:"Docente UNMSM",image:"/wong.jpg",rating:4.8,votes:0,elo:1500},{id:12,name:"Tinoco G\xf3mez, Oscar Rafael",department:"Docente UNMSM",image:"/tinoco.jpg",rating:4.8,votes:0,elo:1500},{id:13,name:"Bendez\xfa Mej\xeda, Christian Casto",department:"Docente UNMSM",image:"/bendezu.jpg",rating:4.8,votes:0,elo:1500},{id:14,name:"Papanicolau Denegri, Jorge Nicol\xe1s Alejandro",department:"Docente UNMSM",image:"/papaniculau.jpg",rating:4.8,votes:0,elo:1500},{id:15,name:"Pariona Llanos, Ricardo",department:"Docente UNMSM",image:"/ricardo_pariona_llanos.jpg",rating:4.8,votes:0,elo:1500}],g=[{id:"first_vote",name:"Primer voto",description:"Arrancaste",xp:50,requirement:1,type:"votes",unlocked:!1},{id:"voter_10",name:"Constante",description:"10 votos",xp:120,requirement:10,type:"votes",unlocked:!1},{id:"voter_50",name:"Pro",description:"50 votos",xp:250,requirement:50,type:"votes",unlocked:!1},{id:"voter_100",name:"Leyenda",description:"100 votos",xp:500,requirement:100,type:"votes",unlocked:!1},{id:"streak_3",name:"Racha x3",description:"3 d\xedas seguidos",xp:150,requirement:3,type:"streak",unlocked:!1},{id:"streak_7",name:"Racha x7",description:"7 d\xedas seguidos",xp:320,requirement:7,type:"streak",unlocked:!1},{id:"night_owl",name:"Nocturno",description:"Votaste de madrugada",xp:80,requirement:1,type:"special",unlocked:!1},{id:"speed_demon",name:"Veloz",description:"5 votos en 1 min",xp:120,requirement:5,type:"special",unlocked:!1}];function v(e){return e[Math.floor(Math.random()*e.length)]}function x(e){let a=d[0];for(let t of d)e>=t.xp&&(a=t);let t=d.findIndex(e=>e.name===a.name),s=d[t+1],n=s?s.xp:a.xp+400;return{level:t+1,name:a.name,baseXp:a.xp,nextXp:n}}function j(){let[e,a]=(0,n.useState)("home"),[t,i]=(0,n.useState)(u),[o,l]=(0,n.useState)(g),[j,N]=(0,n.useState)({totalXP:0,level:1,levelName:"Novato",totalVotes:0,streak:0,lastVoteDate:null,unlockedAchievements:[]}),[f,M]=(0,n.useState)(null),[k,S]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!r)return;let e=!0;return(async()=>{let{data:a,error:t}=await r.from("professors").select("*");if(t){console.error("Supabase fetch error",t.message);return}e&&a&&0!==a.length&&i(u.map(e=>{let t=a.find(a=>a.id===e.id);return t?{...e,...t}:e}))})(),()=>{e=!1}},[]);let b=async e=>{if(!r||!e||0===e.length)return;let{error:a}=await r.from("professors").upsert(e);a&&console.error("Supabase sync error",a.message)};(0,n.useEffect)(()=>{let e=localStorage.getItem("theMatchState"),a=localStorage.getItem("theMatchProfs");if(localStorage.getItem("theMatchVersion")===c){if(e&&N(JSON.parse(e)),a){let e=JSON.parse(a);i(u.map(a=>{let t=e.find(e=>e.id===a.id);return t?{...a,...t}:a}))}}else localStorage.clear(),localStorage.setItem("theMatchVersion",c);D()},[]),(0,n.useEffect)(()=>{j.totalVotes>0&&(localStorage.setItem("theMatchState",JSON.stringify(j)),localStorage.setItem("theMatchProfs",JSON.stringify(t)),localStorage.setItem("theMatchVersion",c))},[j,t]);let D=()=>{let e=[...t].sort(()=>Math.random()-.5);M([e[0],e[1]])},y=e=>{S(e),setTimeout(()=>S(null),2e3)},C=e=>{let a=[],t=0;return(o.forEach(s=>{if(s.unlocked)return;let n=!1;"votes"===s.type&&e.totalVotes>=s.requirement&&(n=!0),"streak"===s.type&&e.streak>=s.requirement&&(n=!0),n&&(a.push(s.id),t+=s.xp,s.unlocked=!0,y("Logro desbloqueado: ".concat(s.name)))}),a.length>0)?(l([...o]),t):0},V=e=>{if(!f)return;let a=f[e],s=f[1-e],n=1/(1+Math.pow(10,(s.elo-a.elo)/400)),o=1/(1+Math.pow(10,(a.elo-s.elo)/400)),l=Math.round(a.elo+32*(1-n)),r=Math.round(s.elo+32*(0-o)),c=t.map(e=>e.id===a.id?{...e,elo:l,votes:e.votes+1}:e.id===s.id?{...e,elo:r}:e);i(c),b([c.find(e=>e.id===a.id),c.find(e=>e.id===s.id)]);let u=new Date().toDateString(),g=j.streak,M=j.lastVoteDate;if(j.lastVoteDate!==u){let e=new Date;e.setDate(e.getDate()-1),g=j.lastVoteDate===e.toDateString()?j.streak+1:1,M=u}let k=10;g>=3&&(k+=5),g>=7&&(k+=10),new Date().getHours();let S={...j,totalVotes:j.totalVotes+1,streak:g,lastVoteDate:M,totalXP:j.totalXP+k},V=C(S);S.totalXP+=V;let I=x(S.totalXP);S.level=I.level,S.levelName=I.name,N(S);let z="Causita Pro"===I.name||S.totalXP>=d.find(e=>"Causita Pro"===e.name).xp;y("".concat(v(z?h:m)," +").concat(k," XP, ").concat(v(p))),setTimeout(D,300)},I=x(j.totalXP),z=Math.min((j.totalXP-I.baseXp)/(I.nextXp-I.baseXp)*100,100);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-grid"}),(0,s.jsxs)("header",{className:"topbar",children:[(0,s.jsx)("div",{className:"brand",children:"Battle Royale"}),(0,s.jsxs)("nav",{className:"nav",children:[(0,s.jsx)("button",{className:"nav-btn ".concat("home"===e?"active":""),onClick:()=>a("home"),children:"Inicio"}),(0,s.jsx)("button",{className:"nav-btn ".concat("ranking"===e?"active":""),onClick:()=>a("ranking"),children:"Ranking"}),(0,s.jsx)("button",{className:"nav-btn ".concat("logros"===e?"active":""),onClick:()=>a("logros"),children:"Logros"})]}),(0,s.jsxs)("div",{className:"stats",children:[(0,s.jsxs)("div",{className:"xp",children:[(0,s.jsxs)("span",{className:"label",children:["XP \xb7 ",I.name]}),(0,s.jsx)("div",{className:"bar",children:(0,s.jsx)("div",{className:"fill",style:{width:"".concat(Math.min(z,100),"%")}})}),(0,s.jsx)("span",{children:j.totalXP})]}),(0,s.jsxs)("div",{className:"streak",children:[(0,s.jsx)("span",{children:j.streak})," d\xedas \uD83D\uDD25"]})]})]}),(0,s.jsxs)("main",{children:["home"===e&&(0,s.jsxs)("section",{className:"panel",children:[(0,s.jsxs)("div",{className:"hero",children:[(0,s.jsx)("p",{className:"eyebrow",children:"Versus en vivo"}),(0,s.jsx)("h1",{children:"\xbfQui\xe9n es el mejor profe?"}),(0,s.jsx)("p",{className:"sub",children:"Dos profesores, un solo clic. Vota por tu favorito y ayuda a decidir qui\xe9n es el mejor."})]}),f&&(0,s.jsxs)("div",{className:"versus",children:[(0,s.jsxs)("article",{className:"card",children:[(0,s.jsx)("div",{className:"badge live",children:"EN VIVO"}),(0,s.jsx)("div",{className:"avatar",children:(0,s.jsx)("img",{src:f[0].image,alt:f[0].name})}),(0,s.jsx)("h3",{children:f[0].name}),(0,s.jsx)("p",{className:"dept",children:f[0].department}),(0,s.jsxs)("div",{className:"meta",children:[(0,s.jsxs)("span",{children:["ELO ",f[0].elo]}),(0,s.jsxs)("span",{children:["\uD83D\uDC65 ",f[0].votes," votos"]})]}),(0,s.jsx)("button",{className:"vote",onClick:()=>V(0),children:"Votar"})]}),(0,s.jsx)("div",{className:"vs",children:"VS"}),(0,s.jsxs)("article",{className:"card",children:[(0,s.jsx)("div",{className:"badge alt",children:"Destacado"}),(0,s.jsx)("div",{className:"avatar",children:(0,s.jsx)("img",{src:f[1].image,alt:f[1].name})}),(0,s.jsx)("h3",{children:f[1].name}),(0,s.jsx)("p",{className:"dept",children:f[1].department}),(0,s.jsxs)("div",{className:"meta",children:[(0,s.jsxs)("span",{children:["ELO ",f[1].elo]}),(0,s.jsxs)("span",{children:["\uD83D\uDC65 ",f[1].votes," votos"]})]}),(0,s.jsx)("button",{className:"vote",onClick:()=>V(1),children:"Votar"})]})]}),(0,s.jsxs)("div",{className:"actions",children:[(0,s.jsx)("button",{className:"ghost",onClick:D,children:"Saltar pareja"}),(0,s.jsx)("button",{className:"primary",onClick:()=>{navigator.clipboard.writeText(window.location.href),y("Enlace copiado")},children:"Compartir match"})]}),(0,s.jsxs)("div",{className:"counter",children:[(0,s.jsx)("p",{className:"label",children:"Votos de hoy"}),(0,s.jsx)("p",{className:"number",children:j.totalVotes.toLocaleString()})]})]}),"ranking"===e&&(0,s.jsxs)("section",{className:"panel",children:[(0,s.jsxs)("div",{className:"section-head",children:[(0,s.jsx)("h2",{children:"Ranking"}),(0,s.jsx)("p",{children:"Ordenado por ELO."})]}),(0,s.jsx)("div",{className:"list",children:[...t].sort((e,a)=>a.elo-e.elo).map((e,a)=>(0,s.jsxs)("div",{className:"rank-item",children:[(0,s.jsx)("div",{className:"rank-pos",children:a+1}),(0,s.jsx)("div",{className:"rank-avatar",children:(0,s.jsx)("img",{src:e.image,alt:e.name})}),(0,s.jsxs)("div",{className:"rank-info",children:[(0,s.jsx)("h4",{children:e.name}),(0,s.jsx)("p",{children:e.department})]}),(0,s.jsxs)("div",{className:"rank-score",children:[(0,s.jsx)("div",{children:e.elo}),(0,s.jsxs)("div",{className:"votes",children:[e.votes," votos"]})]})]},e.id))})]}),"logros"===e&&(0,s.jsxs)("section",{className:"panel",children:[(0,s.jsxs)("div",{className:"section-head",children:[(0,s.jsx)("h2",{children:"Logros"}),(0,s.jsx)("p",{children:"Completa hitos y gana XP extra."})]}),(0,s.jsx)("div",{className:"grid",children:o.map(e=>{let a=0;return"votes"===e.type?a=Math.min(j.totalVotes/e.requirement*100,100):"streak"===e.type&&(a=Math.min(j.streak/e.requirement*100,100)),(0,s.jsxs)("div",{className:"achv ".concat(e.unlocked?"":"locked"),children:[(0,s.jsxs)("div",{className:"xp-tag",children:["+",e.xp," XP"]}),(0,s.jsx)("h4",{children:e.name}),(0,s.jsx)("p",{children:e.description}),e.unlocked?(0,s.jsx)("span",{children:"Liberado"}):(0,s.jsx)("div",{className:"progress",children:(0,s.jsx)("div",{className:"fill",style:{width:"".concat(a,"%")}})})]},e.id)})})]})]}),(0,s.jsx)("div",{className:"toast ".concat(k?"show":""),children:k})]})}}},function(e){e.O(0,[66,971,117,744],function(){return e(e.s=3224)}),_N_E=e.O()}]);